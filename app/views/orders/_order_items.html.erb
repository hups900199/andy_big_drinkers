<div class="container-md">
  <table class="table table-dark table-striped text-center align-middle">
    <thead>
      <tr>
        <th scope="col">Product Name</th>
        <th scope="col">Unit Price</th>
        <th scope="col">Quantity</th>
        <th scope="col">Subtotal</th>
      </tr>
    </thead>
    <tbody>

      <% @line_items.each do |item| %>
        <tr>
          <td><%= link_to item.description, Product.where(name: item.description).first, :class => "nav-link px-2 text-white" %></td>
          <td><%= number_to_currency item.price.unit_amount / 100.0 %></td>
          <td><%= item.quantity %></td>
          <td><%= number_to_currency item.amount_subtotal / 100.0 %></td>
        </tr>
      <% end %>

    </tbody>

    <thead>
      <td></td>
      <td></td>
      <td></td>
      <td><%= number_to_currency @line_items.collect { |order_item| order_item.price.unit_amount * order_item.quantity }.sum / 100.0 %></td>
    </thead>

  </table>
</div>