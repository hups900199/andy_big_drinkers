<div class="card text-center">

  <%= link_to image_tag(product.type.image, alt: product.type.name, size:"200x300", :class => "card-img-top"), product %>
  <%= link_to image_tag(product.image.image, alt: product.image.name, size:"200x300", :class => "card-img-top"), product %>

  <div class="card-body">
    <h5 class="card-title"><%= link_to product.name, product %></h5>
    <p class="card-text"><small class="text-muted">Last updated <%= time_ago_in_words(product.updated_at) %> ago</small></p>
  </div>

  <ul class="list-group list-group-flush">
    <li class="list-group-item">In Stock: <%= product.stock %></li>
  </ul>

  <% form_with model: @order_item do |f| %>
    <%= f.hidden_field :product_id, value: item.product.id %>
    <%= f.number_field :quantity, value: 1, min: 1 %>
    <%= f.submit "Add to Cart" %>
  <% end %>

  <% if cart.include?(product) %>

    <%= button_to cart_path(product), method: :delete do %>
      Remove From Cart
    <% end %>

  <% else %>

    <%= form_with(url: cart_index_path, method: :post) do %>
      <%= hidden_field_tag(:id, product.id) %>
      <%= button_tag 'Add to Cart' %>
    <% end %>

  <% end %>

</div>